<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Genspark Automation</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>🤖 Genspark Automation</h1>
      <div class="environment-badge" id="environmentBadge">
        <span id="environmentName">テスト</span>
      </div>
    </header>

    <main>
      <!-- AIモデル選択 -->
      <section class="model-section">
        <h2>AIモデル</h2>
        <select id="modelSelect" class="model-select">
          <option value="genspark">Genspark</option>
          <option value="chatgpt">ChatGPT</option>
          <option value="claude">Claude</option>
          <option value="gemini">Gemini</option>
          <option value="perplexity">Perplexity</option>
        </select>
      </section>

      <!-- 機能選択 -->
      <section class="function-section">
        <h2>機能</h2>
        <select id="functionSelect" class="function-select">
          <option value="slides_agent">スライド生成</option>
          <option value="summarize">要約</option>
          <option value="translate">翻訳</option>
          <option value="analyze">分析</option>
          <option value="chat">チャット</option>
        </select>
      </section>

      <!-- 入力セクション -->
      <section class="input-section">
        <h2>プロンプト入力</h2>
        <textarea 
          id="promptInput" 
          placeholder="例: 桃太郎についてスライド4枚で解説して"
          rows="3"
        ></textarea>
      </section>

      <!-- データソース選択 -->
      <section class="source-section">
        <h2>データソース</h2>
        <div class="radio-group">
          <label>
            <input type="radio" name="dataSource" value="manual" checked>
            <span>手動入力</span>
          </label>
          <label>
            <input type="radio" name="dataSource" value="spreadsheet">
            <span>スプレッドシート</span>
          </label>
        </div>
        
        <!-- スプレッドシート設定 -->
        <div id="spreadsheetConfig" class="config-panel hidden">
          <input 
            type="text" 
            id="spreadsheetId" 
            placeholder="スプレッドシートID"
          >
          <input 
            type="text" 
            id="apiKey" 
            placeholder="APIキー"
          >
        </div>
      </section>

      <!-- 実行ボタン -->
      <section class="action-section">
        <button id="executeBtn" class="btn btn-primary">
          <span class="btn-icon">▶️</span>
          <span>実行</span>
        </button>
        
        <button id="stopBtn" class="btn btn-danger hidden">
          <span class="btn-icon">⏹</span>
          <span>停止</span>
        </button>
      </section>

      <!-- ステータス表示 -->
      <section id="statusSection" class="status-section hidden">
        <h3>実行状況</h3>
        <div class="status-content">
          <div class="status-message" id="statusMessage"></div>
          <div class="loading-spinner hidden" id="loadingSpinner">
            <div class="spinner"></div>
          </div>
        </div>
      </section>

      <!-- 結果表示 -->
      <section id="resultSection" class="result-section hidden">
        <h3>実行結果</h3>
        <div class="result-content">
          <div class="result-item">
            <span class="result-label">URL:</span>
            <a id="resultUrl" href="#" target="_blank"></a>
          </div>
          <div class="result-item">
            <span class="result-label">実行時間:</span>
            <span id="executionTime"></span>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <!-- 設定ボタン -->
      <div class="footer-actions">
        <button id="settingsBtn" class="btn btn-icon" title="設定">
          ⚙️
        </button>
        <button id="historyBtn" class="btn btn-icon" title="履歴">
          📋
        </button>
        <button id="environmentToggle" class="btn btn-icon" title="環境切替">
          🔄
        </button>
      </div>
    </footer>

    <!-- 設定モーダル -->
    <div id="settingsModal" class="modal hidden">
      <div class="modal-content">
        <h2>設定</h2>
        <div class="settings-form">
          <label>
            環境:
            <select id="environmentSelect">
              <option value="test">テスト</option>
              <option value="production">本番</option>
            </select>
          </label>
        </div>
        <div class="modal-actions">
          <button id="saveSettingsBtn" class="btn btn-primary">保存</button>
          <button id="closeSettingsBtn" class="btn">キャンセル</button>
        </div>
      </div>
    </div>

    <!-- 履歴モーダル -->
    <div id="historyModal" class="modal hidden">
      <div class="modal-content">
        <h2>実行履歴</h2>
        <div id="historyList" class="history-list">
          <!-- 動的に生成 -->
        </div>
        <div class="modal-actions">
          <button id="clearHistoryBtn" class="btn btn-danger">履歴クリア</button>
          <button id="closeHistoryBtn" class="btn">閉じる</button>
        </div>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>